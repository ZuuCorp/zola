import{A as e}from"./audio-d47a3f8a.js";import{T as t}from"./timeline-2e251f52.js";import{E as n}from"./effects-c8e00909.js";import{U as o}from"./ui-88ccac77.js";import{W as i}from"./catalog-97bec3ca.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a{constructor(e=null){this.config=e,this.defaultConfig=this.getDefaultConfig()}static async load(){try{const e=await fetch("assets/config.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();return new a(t)}catch(e){return new a}}getDefaultConfig(){return{audio:{sounds:{missionPassed:{src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",description:"Son Mission Passed GTA 4"},gtatheme:{src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",description:"Thème GTA 4 ambiance urbaine"}},music:{origines:{title:"Origines",album:"EP - 2020",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"3:45"},evolution:{title:"Évolution",album:"Album - 2022",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"4:12"},nouveauMonde:{title:"Nouveau Monde",album:"Single - 2023",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"3:28"}}},images:{logo:{src:"https://via.placeholder.com/400x200/00ff41/000000?text=ZOLA",alt:"Logo ZOLA",description:"Logo principal de l'artiste"},sections:{intro:{src:"https://via.placeholder.com/300x300/00ff41/000000?text=Portrait+ZOLA",alt:"Portrait ZOLA",description:"Portrait de l'artiste ZOLA"},debuts:{src:"https://via.placeholder.com/300x300/ff6b35/000000?text=Freestyles",alt:"Premiers Freestyles",description:"ZOLA en train de freestyler"},succes:{src:"https://via.placeholder.com/300x300/ffd700/000000?text=EP+Origines",alt:"EP Origines",description:"Couverture de l'EP Origines"},albums:{src:"https://via.placeholder.com/300x300/00ff41/000000?text=Album+Evolution",alt:"Album Évolution",description:"Couverture de l'album Évolution"},moments:{src:"https://via.placeholder.com/300x300/ff6b35/000000?text=Recompenses",alt:"Récompenses",description:"Trophées et récompenses"},actuel:{src:"https://via.placeholder.com/300x300/ffd700/000000?text=Projets+Futurs",alt:"Projets Futurs",description:"Futurs projets de ZOLA"}}},colors:{primary:"#00ff41",secondary:"#ff6b35",accent:"#ffd700",dark:"#0a0a0a",darker:"#050505",text:"#ffffff",textSecondary:"#cccccc"},animations:{enabled:!0,duration:{fast:300,medium:500,slow:800},easing:"cubic-bezier(0.4, 0, 0.2, 1)"},performance:{enableParticles:!0,maxParticles:50,enableParallax:!0,enableRain:!0}}}get(e,t=null){if(!this.config)return this.getFromDefault(e,t);const n=e.split(".");let o=this.config;for(const i of n){if(!o||"object"!=typeof o||!(i in o))return this.getFromDefault(e,t);o=o[i]}return void 0!==o?o:t}getFromDefault(e,t=null){const n=e.split(".");let o=this.defaultConfig;for(const i of n){if(!o||"object"!=typeof o||!(i in o))return t;o=o[i]}return void 0!==o?o:t}set(e,t){this.config||(this.config={});const n=e.split("."),o=n.pop();let i=this.config;for(const a of n)a in i&&"object"==typeof i[a]||(i[a]={}),i=i[a];i[o]=t}has(e){return null!==this.get(e)}merge(e){this.config=this.deepMerge(this.config||{},e)}deepMerge(e,t){const n={...e};for(const o in t)t[o]&&"object"==typeof t[o]&&!Array.isArray(t[o])?n[o]=this.deepMerge(e[o]||{},t[o]):n[o]=t[o];return n}validate(){const e=[];return this.get("audio.sounds.missionPassed.src")||e.push("Configuration audio manquante: missionPassed"),this.get("audio.music.origines.src")||e.push("Configuration audio manquante: musique origines"),this.get("colors.primary")||e.push("Configuration des couleurs manquante"),{isValid:0===e.length,errors:e}}export(){return JSON.stringify(this.config||this.defaultConfig,null,2)}reset(){this.config=null}getAudioConfig(){return this.get("audio",this.defaultConfig.audio)}getImageConfig(){return this.get("images",this.defaultConfig.images)}getColorConfig(){return this.get("colors",this.defaultConfig.colors)}getAnimationConfig(){return this.get("animations",this.defaultConfig.animations)}getPerformanceConfig(){return this.get("performance",this.defaultConfig.performance)}debug(){}}const s=new class{constructor(){this.modules={},this.isInitialized=!1,this.config=null}async init(){try{this.config=await a.load(),await this.initializeModules(),this.webCatalog=new i,await this.webCatalog.init(),this.startVisualEffects(),this.setupGlobalEvents(),this.isInitialized=!0,this.dispatchEvent("zola:initialized")}catch(e){this.handleInitializationError(e)}}async initializeModules(){this.modules.config=new a(this.config),this.modules.audio=new e(this.config.audio),this.modules.timeline=new t,this.modules.effects=new n,this.modules.ui=new o(this.config);const i=Object.values(this.modules).map(e=>e.init?e.init():Promise.resolve());await Promise.all(i)}startVisualEffects(){this.modules.effects.startRain(),this.modules.effects.startParticles(),this.modules.effects.startScrollAnimations()}setupGlobalEvents(){let e,t;window.addEventListener("error",e=>{this.handleError(e.error)}),window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason)}),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleResize()},250)}),document.addEventListener("visibilitychange",()=>{document.hidden?this.handlePageHidden():this.handlePageVisible()}),window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{this.handleScroll()},100)})}handleInitializationError(e){const t=document.createElement("div");t.className="error-overlay",t.innerHTML='\n            <div class="error-content">\n                <h2>Erreur d\'initialisation</h2>\n                <p>Le site n\'a pas pu se charger correctement.</p>\n                <button onclick="location.reload()">Recharger la page</button>\n            </div>\n        ',document.body.appendChild(t)}handleError(e){this.modules.ui&&this.modules.ui.showNotification("Une erreur est survenue","error")}handleResize(){Object.values(this.modules).forEach(e=>{e.handleResize&&e.handleResize()})}handlePageHidden(){this.modules.audio&&this.modules.audio.pauseAll(),this.modules.effects&&this.modules.effects.pauseAnimations()}handlePageVisible(){this.modules.audio&&this.modules.audio.resumeAll(),this.modules.effects&&this.modules.effects.resumeAnimations()}handleScroll(){this.modules.effects&&this.modules.effects.handleScroll()}getModule(e){return this.modules[e]}dispatchEvent(e,t={}){const n=new CustomEvent(e,{detail:{...t,timestamp:Date.now()}});window.dispatchEvent(n)}debug(){}getPerformanceMetrics(){var e;return{loadTime:performance.timing.loadEventEnd-performance.timing.navigationStart,domReady:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,firstPaint:(null==(e=performance.getEntriesByType("paint")[0])?void 0:e.startTime)||0,memory:performance.memory?{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit}:null}}};document.addEventListener("DOMContentLoaded",()=>{s.init()}),window.zolaSite=s;let l=!0,r="dark",c=new Set,d=null,u=[];const m=document.getElementById("missionPassed"),f=document.getElementById("gtatheme"),p=document.getElementById("toggleAudio"),h=document.getElementById("toggleTheme"),g=document.getElementById("missionPassedOverlay"),v=document.querySelectorAll(".timeline-section"),y=document.querySelectorAll(".nav-btn"),E=document.querySelectorAll(".play-btn"),w=document.querySelector(".rain-container");function b(){const e=document.createElement("div");e.className="rain-drop",e.style.left=100*Math.random()+"%",e.style.animationDuration=2*Math.random()+1+"s",e.style.animationDelay=2*Math.random()+"s",w.appendChild(e),u.push(e),setTimeout(()=>{e.parentNode&&(e.remove(),b())},3e3)}function L(){l=!l,l||(d&&(d.pause(),d.currentTime=0),f.pause(),m.pause()),C()}function C(){const e=p.querySelector("i");e.className=l?"fas fa-volume-up":"fas fa-volume-mute"}function A(e,t){l&&(d=new Audio(e),d.play(),t.innerHTML='<i class="fas fa-pause"></i>',t.classList.add("playing"),d.addEventListener("ended",()=>{t.innerHTML='<i class="fas fa-play"></i>',t.classList.remove("playing"),d=null}))}function k(){r="dark"===r?"light":"dark","light"===r?(document.body.classList.add("light-theme"),h.innerHTML='<i class="fas fa-sun"></i>'):(document.body.classList.remove("light-theme"),h.innerHTML='<i class="fas fa-moon"></i>')}function x(){l&&(f.volume=.3,f.play().catch(e=>{}))}document.addEventListener("DOMContentLoaded",function(){!function(){for(let e=0;e<100;e++)b()}(),function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.id;!function(e){y.forEach(t=>{t.classList.remove("active"),t.dataset.section===e&&t.classList.add("active")}),v.forEach(t=>{t.classList.remove("active"),t.id===e&&t.classList.add("active")})}(t),c.has(t)||(!function(){if(!l)return;m.currentTime=0,m.play().catch(e=>{})}(),c.add(t),g.style.display="flex",setTimeout(()=>{g.style.display="none"},2e3))}})},{threshold:.5,rootMargin:"-100px 0px -100px 0px"});v.forEach(t=>{e.observe(t)}),y.forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}(e.dataset.section)})})}(),p.addEventListener("click",L),C(),E.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".track").dataset.audio;d&&d.src.includes(t)?d.paused?A(t,e):function(e){d&&(d.pause(),e.innerHTML='<i class="fas fa-play"></i>',e.classList.remove("playing"))}(e):(d&&(d&&(d.pause(),d=null),E.forEach(e=>{e.innerHTML='<i class="fas fa-play"></i>',e.classList.remove("playing")})),A(t,e))})}),h.addEventListener("click",k),function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"-50px 0px"});document.querySelectorAll(".fact-card, .track").forEach(t=>{e.observe(t)})}(),document.addEventListener("click",x,{once:!0});const e=document.querySelector("#dynamicTrackList");if(e){const t=t=>{const n=document.createDocumentFragment();t.slice(0,20).forEach(e=>{const t=document.createElement("div");t.className="track",t.dataset.audio=e.previewUrl,t.innerHTML=`\n                    <div class="track-info">\n                        <span class="track-title">${e.title}</span>\n                        <span class="track-album">${e.album}</span>\n                    </div>\n                    <button class="play-btn" aria-label="Lire ${e.title}"><i class="fas fa-play"></i></button>\n                `,n.appendChild(t)}),e.innerHTML="",e.appendChild(n)};window.addEventListener("catalog:loaded",()=>{var e;if(null==(e=window.zolaSite)?void 0:e.webCatalog){const e=window.zolaSite.webCatalog.getTracks();t(e),function(e,t){const n=document.getElementById("gtaGrid");if(!n)return;const o=[];(e||[]).slice(0,9).forEach(e=>o.push({img:e.cover,label:e.title,album:e})),o.length<12&&(t||[]).slice(0,12-o.length).forEach(e=>o.push({img:e.cover,label:e.title,track:e}));const i=document.createDocumentFragment();o.slice(0,12).forEach(e=>{const n=document.createElement("div");n.className="gta-card",n.innerHTML=`\n            <img src="${e.img}" alt="${e.label}">\n            <div class="gta-badge">${e.label}</div>\n        `,n.addEventListener("click",()=>{e.album&&function(e,t){const n=document.getElementById("albumModal"),o=document.getElementById("modalCover"),i=document.getElementById("modalTitle"),a=document.getElementById("modalSub"),s=document.getElementById("modalTracklist"),l=document.getElementById("modalOpenApple");o.src=e.cover,i.textContent=e.title;const r=(e.releaseDate||"").slice(0,4);a.textContent=`${e.artist} · ${r||""}`,l.href=e.url||"#";const c=(t||[]).filter(t=>t.album===e.title),d=document.createDocumentFragment();c.slice(0,20).forEach(e=>{const t=document.createElement("div");t.className="row",t.innerHTML=`<div>${e.title}</div><button class="play">Lecture</button>`,t.querySelector(".play").addEventListener("click",()=>{var t;(null==(t=window.zolaSite)?void 0:t.getModule("audio"))&&window.zolaSite.getModule("audio").playAudio(e.previewUrl)}),d.appendChild(t)}),s.innerHTML="",s.appendChild(d),n.style.display="flex",n.setAttribute("aria-hidden","false"),n.addEventListener("click",e=>{e.target===n&&(n.style.display="none",n.setAttribute("aria-hidden","true"))},{once:!0})}(e.album,t)}),i.appendChild(n)}),n.innerHTML="",n.appendChild(i)}(window.zolaSite.webCatalog.getAlbums(),e)}}),e.addEventListener("click",e=>{var t,n;const o=e.target.closest(".play-btn");if(!o)return;const i=o.closest(".track"),a=null==(t=null==i?void 0:i.dataset)?void 0:t.audio;a&&(null==(n=window.zolaSite)?void 0:n.getModule("audio"))&&window.zolaSite.getModule("audio").playAudio(a)})}}),window.addEventListener("scroll",()=>{const e=window.pageYOffset;document.querySelectorAll(".timeline-section").forEach((t,n)=>{const o=-e*(.5+.1*n);t.style.transform=`translateY(${o}px)`})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".logo");e.addEventListener("mouseenter",()=>{e.style.textShadow="0 0 30px var(--primary-color), 0 0 40px var(--primary-color), 0 0 50px var(--primary-color)",e.style.transform="scale(1.05)"}),e.addEventListener("mouseleave",()=>{e.style.textShadow="",e.style.transform=""});document.querySelectorAll(".fact-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.borderColor="var(--accent-color)",e.style.boxShadow="0 0 30px var(--accent-color)"}),e.addEventListener("mouseleave",()=>{e.style.borderColor="",e.style.boxShadow=""})})}),window.addEventListener("error",e=>{"AUDIO"===e.target.tagName&&(l=!1,C())});let S=!1;function I(e){T();const t=document.getElementById(`app-${e}`);null==t||t.classList.add("active")}function T(){document.querySelectorAll(".phone-app").forEach(e=>e.classList.remove("active"))}function M(e){const t=document.getElementById("siteToast");if(!t)return;const n=document.createElement("div");n.className="toast",n.textContent=e,t.appendChild(n),setTimeout(()=>{n.remove()},2500)}window.addEventListener("scroll",function(){S||(requestAnimationFrame(()=>{S=!1}),S=!0)}),window.addEventListener("resize",()=>{if(u.length<50)for(let e=0;e<25;e++)b()}),window.addEventListener("load",()=>{var e,t,n,o,i,a,s;document.body.style.opacity="0",document.body.style.transition="opacity 1s ease",setTimeout(()=>{document.body.style.opacity="1"},100);const l=document.getElementById("gtaPhone"),r=document.getElementById("phoneTime"),c=document.getElementById("sfxPhoneOpen"),d=document.getElementById("sfxPhoneClose"),u=document.getElementById("sfxTap"),m=document.getElementById("sfxSms");function f(){const e=new Date;r&&(r.textContent=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}f(),setInterval(f,6e4),window.addEventListener("keydown",e=>{var t,n;if("ArrowUp"===e.key&&(e.preventDefault(),l)){const e=!l.classList.contains("open");l.classList.toggle("open"),l.setAttribute("aria-hidden",e?"false":"true");try{null==(n=null==(t=e?c:d)?void 0:t.play)||n.call(t)}catch{}}}),null==(e=document.getElementById("openPhoneBtn"))||e.addEventListener("click",()=>{var e,t;const n=!(null==l?void 0:l.classList.contains("open"));null==l||l.classList.toggle("open"),null==l||l.setAttribute("aria-hidden",n?"false":"true");try{null==(t=null==(e=n?c:d)?void 0:e.play)||t.call(e)}catch{}}),null==l||l.addEventListener("click",e=>{e.target===l&&(l.classList.remove("open"),l.setAttribute("aria-hidden","true"))}),document.querySelectorAll(".app-icon").forEach(e=>{e.addEventListener("click",()=>{var t,n;try{null==(t=null==u?void 0:u.play)||t.call(u)}catch{}const o=e.getAttribute("data-app");if("music"===o){null==(n=document.getElementById("gtaPhone"))||n.classList.remove("open");const e=document.querySelector("#dynamicTrackList .track .play-btn");return e&&e.click(),void M("Lecture de l'extrait")}if("social"!==o){if("browser"!==o)return"contacts"===o?(I("contacts"),void function(){const e=document.getElementById("contactsList");if(!e||e.childElementCount)return;const t=[{name:"Zola",avatar:"Z"},{name:"Manager",avatar:"M"},{name:"Prod",avatar:"P"}],n=document.createDocumentFragment();t.forEach(e=>{var t;const o=document.createElement("div");o.className="contact-row",o.innerHTML=`<div class="avatar">${e.avatar}</div><div>${e.name}</div><button class="row play">Appeler</button>`,null==(t=o.querySelector("button"))||t.addEventListener("click",()=>M(`Appel vers ${e.name}`)),n.appendChild(o)}),e.appendChild(n)}()):void("messages"!==o?"settings"!==o||I("settings"):I("messages"));I("browser")}else window.open("https://instagram.com/binkszola","_blank")})}),document.querySelectorAll("[data-back]").forEach(e=>{e.addEventListener("click",()=>{T()})}),document.querySelectorAll("#app-browser [data-open]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open");t&&window.open(t,"_blank")})}),null==(t=document.getElementById("smsSend"))||t.addEventListener("click",()=>{var e;const t=document.getElementById("smsInput"),n=document.getElementById("smsThread");if(null==t?void 0:t.value){const o=document.createElement("div");o.className="bubble-out",o.textContent=t.value,null==n||n.appendChild(o),t.value="",null==n||n.scrollTo({top:n.scrollHeight,behavior:"smooth"});try{null==(e=null==m?void 0:m.play)||e.call(m)}catch{}}}),null==(n=document.querySelectorAll("[data-app-open]"))||n.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-app-open");t&&I(t)})}),null==(o=document.querySelectorAll("[data-digit]"))||o.forEach(e=>{e.addEventListener("click",()=>{var t;const n=e.getAttribute("data-digit"),o=document.getElementById("dialDisplay");o&&(o.textContent=(o.textContent||"")+n);try{null==(t=null==u?void 0:u.play)||t.call(u)}catch{}})}),null==(i=document.getElementById("dialClear"))||i.addEventListener("click",()=>{const e=document.getElementById("dialDisplay");e&&(e.textContent="")}),null==(a=document.getElementById("dialCall"))||a.addEventListener("click",()=>{var e;const t=document.getElementById("dialDisplay");M(`Appel vers ${(null==t?void 0:t.textContent)||""}`);try{null==(e=null==u?void 0:u.play)||e.call(u)}catch{}}),null==(s=document.getElementById("toggleAmbient"))||s.addEventListener("change",e=>{const t=e.target.checked,n=document.getElementById("gtatheme");n&&(t?n.play().catch(()=>{}):n.pause())})}),setInterval(function(){const e=document.createElement("div");e.style.position="fixed",e.style.width="2px",e.style.height="2px",e.style.background="var(--primary-color)",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.zIndex="1",e.style.left=100*Math.random()+"vw",e.style.top=100*Math.random()+"vh",document.body.appendChild(e);let t=1;const n=setInterval(()=>{t-=.02,e.style.opacity=t,t<=0&&(clearInterval(n),e.remove())},50)},2e3),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("h2, h3, .track-title").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.filter="hue-rotate(90deg)",e.style.transform="skew(-2deg)"}),e.addEventListener("mouseleave",()=>{e.style.filter="",e.style.transform=""})})});
