import{A as e}from"./audio-d47a3f8a.js";import{T as t}from"./timeline-2e251f52.js";import{E as n}from"./effects-c8e00909.js";import{U as i}from"./ui-88ccac77.js";import{W as o}from"./catalog-a0d47d8f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class s{constructor(e=null){this.config=e,this.defaultConfig=this.getDefaultConfig()}static async load(){try{const e=await fetch("assets/config.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();return new s(t)}catch(e){return new s}}getDefaultConfig(){return{audio:{sounds:{missionPassed:{src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",description:"Son Mission Passed GTA 4"},gtatheme:{src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",description:"Thème GTA 4 ambiance urbaine"}},music:{origines:{title:"Origines",album:"EP - 2020",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"3:45"},evolution:{title:"Évolution",album:"Album - 2022",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"4:12"},nouveauMonde:{title:"Nouveau Monde",album:"Single - 2023",src:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",type:"audio/wav",duration:"3:28"}}},images:{logo:{src:"https://via.placeholder.com/400x200/00ff41/000000?text=ZOLA",alt:"Logo ZOLA",description:"Logo principal de l'artiste"},sections:{intro:{src:"https://via.placeholder.com/300x300/00ff41/000000?text=Portrait+ZOLA",alt:"Portrait ZOLA",description:"Portrait de l'artiste ZOLA"},debuts:{src:"https://via.placeholder.com/300x300/ff6b35/000000?text=Freestyles",alt:"Premiers Freestyles",description:"ZOLA en train de freestyler"},succes:{src:"https://via.placeholder.com/300x300/ffd700/000000?text=EP+Origines",alt:"EP Origines",description:"Couverture de l'EP Origines"},albums:{src:"https://via.placeholder.com/300x300/00ff41/000000?text=Album+Evolution",alt:"Album Évolution",description:"Couverture de l'album Évolution"},moments:{src:"https://via.placeholder.com/300x300/ff6b35/000000?text=Recompenses",alt:"Récompenses",description:"Trophées et récompenses"},actuel:{src:"https://via.placeholder.com/300x300/ffd700/000000?text=Projets+Futurs",alt:"Projets Futurs",description:"Futurs projets de ZOLA"}}},colors:{primary:"#00ff41",secondary:"#ff6b35",accent:"#ffd700",dark:"#0a0a0a",darker:"#050505",text:"#ffffff",textSecondary:"#cccccc"},animations:{enabled:!0,duration:{fast:300,medium:500,slow:800},easing:"cubic-bezier(0.4, 0, 0.2, 1)"},performance:{enableParticles:!0,maxParticles:50,enableParallax:!0,enableRain:!0}}}get(e,t=null){if(!this.config)return this.getFromDefault(e,t);const n=e.split(".");let i=this.config;for(const o of n){if(!i||"object"!=typeof i||!(o in i))return this.getFromDefault(e,t);i=i[o]}return void 0!==i?i:t}getFromDefault(e,t=null){const n=e.split(".");let i=this.defaultConfig;for(const o of n){if(!i||"object"!=typeof i||!(o in i))return t;i=i[o]}return void 0!==i?i:t}set(e,t){this.config||(this.config={});const n=e.split("."),i=n.pop();let o=this.config;for(const s of n)s in o&&"object"==typeof o[s]||(o[s]={}),o=o[s];o[i]=t}has(e){return null!==this.get(e)}merge(e){this.config=this.deepMerge(this.config||{},e)}deepMerge(e,t){const n={...e};for(const i in t)t[i]&&"object"==typeof t[i]&&!Array.isArray(t[i])?n[i]=this.deepMerge(e[i]||{},t[i]):n[i]=t[i];return n}validate(){const e=[];return this.get("audio.sounds.missionPassed.src")||e.push("Configuration audio manquante: missionPassed"),this.get("audio.music.origines.src")||e.push("Configuration audio manquante: musique origines"),this.get("colors.primary")||e.push("Configuration des couleurs manquante"),{isValid:0===e.length,errors:e}}export(){return JSON.stringify(this.config||this.defaultConfig,null,2)}reset(){this.config=null}getAudioConfig(){return this.get("audio",this.defaultConfig.audio)}getImageConfig(){return this.get("images",this.defaultConfig.images)}getColorConfig(){return this.get("colors",this.defaultConfig.colors)}getAnimationConfig(){return this.get("animations",this.defaultConfig.animations)}getPerformanceConfig(){return this.get("performance",this.defaultConfig.performance)}debug(){}}const a=new class{constructor(){this.modules={},this.isInitialized=!1,this.config=null}async init(){try{this.config=await s.load(),await this.initializeModules(),this.webCatalog=new o,await this.webCatalog.init(),this.startVisualEffects(),this.setupGlobalEvents(),this.isInitialized=!0,this.dispatchEvent("zola:initialized")}catch(e){this.handleInitializationError(e)}}async initializeModules(){this.modules.config=new s(this.config),this.modules.audio=new e(this.config.audio),this.modules.timeline=new t,this.modules.effects=new n,this.modules.ui=new i(this.config);const o=Object.values(this.modules).map(e=>e.init?e.init():Promise.resolve());await Promise.all(o)}startVisualEffects(){this.modules.effects.startRain(),this.modules.effects.startParticles(),this.modules.effects.startScrollAnimations()}setupGlobalEvents(){let e,t;window.addEventListener("error",e=>{this.handleError(e.error)}),window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason)}),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleResize()},250)}),document.addEventListener("visibilitychange",()=>{document.hidden?this.handlePageHidden():this.handlePageVisible()}),window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{this.handleScroll()},100)})}handleInitializationError(e){const t=document.createElement("div");t.className="error-overlay",t.innerHTML='\n            <div class="error-content">\n                <h2>Erreur d\'initialisation</h2>\n                <p>Le site n\'a pas pu se charger correctement.</p>\n                <button onclick="location.reload()">Recharger la page</button>\n            </div>\n        ',document.body.appendChild(t)}handleError(e){this.modules.ui&&this.modules.ui.showNotification("Une erreur est survenue","error")}handleResize(){Object.values(this.modules).forEach(e=>{e.handleResize&&e.handleResize()})}handlePageHidden(){this.modules.audio&&this.modules.audio.pauseAll(),this.modules.effects&&this.modules.effects.pauseAnimations()}handlePageVisible(){this.modules.audio&&this.modules.audio.resumeAll(),this.modules.effects&&this.modules.effects.resumeAnimations()}handleScroll(){this.modules.effects&&this.modules.effects.handleScroll()}getModule(e){return this.modules[e]}dispatchEvent(e,t={}){const n=new CustomEvent(e,{detail:{...t,timestamp:Date.now()}});window.dispatchEvent(n)}debug(){}getPerformanceMetrics(){var e;return{loadTime:performance.timing.loadEventEnd-performance.timing.navigationStart,domReady:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,firstPaint:(null==(e=performance.getEntriesByType("paint")[0])?void 0:e.startTime)||0,memory:performance.memory?{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit}:null}}};document.addEventListener("DOMContentLoaded",()=>{a.init()}),window.zolaSite=a;let r=!0,l="dark",d=new Set,c=null,u=[];const m=document.getElementById("missionPassed"),f=document.getElementById("gtatheme"),p=document.getElementById("toggleAudio"),g=document.getElementById("toggleTheme"),h=document.getElementById("missionPassedOverlay"),y=document.querySelectorAll(".timeline-section"),v=document.querySelectorAll(".nav-btn"),w=document.querySelectorAll(".play-btn"),E=document.querySelector(".rain-container");function b(){const e=document.createElement("div");e.className="rain-drop",e.style.left=100*Math.random()+"%",e.style.animationDuration=2*Math.random()+1+"s",e.style.animationDelay=2*Math.random()+"s",E.appendChild(e),u.push(e),setTimeout(()=>{e.parentNode&&(e.remove(),b())},3e3)}function L(){r=!r,r||(c&&(c.pause(),c.currentTime=0),f.pause(),m.pause()),x()}function x(){const e=p.querySelector("i");e.className=r?"fas fa-volume-up":"fas fa-volume-mute"}function C(e,t){r&&(c=new Audio(e),c.play(),t.innerHTML='<i class="fas fa-pause"></i>',t.classList.add("playing"),c.addEventListener("ended",()=>{t.innerHTML='<i class="fas fa-play"></i>',t.classList.remove("playing"),c=null}))}function S(){l="dark"===l?"light":"dark","light"===l?(document.body.classList.add("light-theme"),g.innerHTML='<i class="fas fa-sun"></i>'):(document.body.classList.remove("light-theme"),g.innerHTML='<i class="fas fa-moon"></i>')}function k(){r&&(f.volume=.3,f.play().catch(e=>{}))}document.addEventListener("DOMContentLoaded",function(){!function(){for(let e=0;e<100;e++)b()}(),function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.id;!function(e){v.forEach(t=>{t.classList.remove("active"),t.dataset.section===e&&t.classList.add("active")}),y.forEach(t=>{t.classList.remove("active"),t.id===e&&t.classList.add("active")})}(t),d.has(t)||(!function(){if(!r)return;m.currentTime=0,m.play().catch(e=>{})}(),d.add(t),h.style.display="flex",setTimeout(()=>{h.style.display="none"},2e3))}})},{threshold:.5,rootMargin:"-100px 0px -100px 0px"});y.forEach(t=>{e.observe(t)}),v.forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}(e.dataset.section)})})}(),p.addEventListener("click",L),x(),w.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".track").dataset.audio;c&&c.src.includes(t)?c.paused?C(t,e):function(e){c&&(c.pause(),e.innerHTML='<i class="fas fa-play"></i>',e.classList.remove("playing"))}(e):(c&&(c&&(c.pause(),c=null),w.forEach(e=>{e.innerHTML='<i class="fas fa-play"></i>',e.classList.remove("playing")})),C(t,e))})}),g.addEventListener("click",S),function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"-50px 0px"});document.querySelectorAll(".fact-card, .track").forEach(t=>{e.observe(t)})}(),document.addEventListener("click",k,{once:!0});const e=document.querySelector("#dynamicTrackList");if(e){const t=t=>{const n=document.createDocumentFragment();t.slice(0,20).forEach(e=>{const t=document.createElement("div");t.className="track",t.dataset.audio=e.previewUrl,t.innerHTML=`\n                    <div class="track-info">\n                        <span class="track-title">${e.title}</span>\n                        <span class="track-album">${e.album}</span>\n                    </div>\n                    <button class="play-btn" aria-label="Lire ${e.title}"><i class="fas fa-play"></i></button>\n                `,n.appendChild(t)}),e.innerHTML="",e.appendChild(n)};window.addEventListener("catalog:loaded",()=>{var e;if(null==(e=window.zolaSite)?void 0:e.webCatalog){const e=window.zolaSite.webCatalog.getTracks();t(e),function(e,t){const n=document.getElementById("phoneMusicGrid");if(!n)return;const i=[];(e||[]).slice(0,12).forEach(e=>i.push({img:e.cover,label:e.title,album:e}));const o=document.createDocumentFragment();i.forEach(e=>{const n=document.createElement("div");n.className="card",n.innerHTML=`<img src="${e.img}" alt="${e.label}"><div class="cap">${e.label}</div>`,n.addEventListener("click",()=>function(e,t){var n;const i=document.getElementById("padCover"),o=document.getElementById("padTitle"),s=document.getElementById("padSub"),a=document.getElementById("padTracklist"),r=document.getElementById("phoneAlbumDetail"),l=document.getElementById("phoneMusicGrid");if(!r||!l)return;i.src=e.cover,o.textContent=e.title;const d=(e.releaseDate||"").slice(0,4);s.textContent=`${e.artist} · ${d||""}`;const c=(t||[]).filter(t=>t.album===e.title),u=document.createDocumentFragment();c.slice(0,20).forEach(e=>{var t;const n=document.createElement("div");n.className="row",n.innerHTML=`<div>${e.title}</div><button class="play">Lecture</button>`,null==(t=n.querySelector(".play"))||t.addEventListener("click",()=>{var t;(null==(t=window.zolaSite)?void 0:t.getModule("audio"))&&window.zolaSite.getModule("audio").playAudio(e.previewUrl)}),u.appendChild(n)}),a.innerHTML="",a.appendChild(u),l.style.display="none",r.style.display="block",null==(n=document.querySelector("#app-music [data-back]"))||n.addEventListener("click",()=>{r.style.display="none",l.style.display="grid"},{once:!0})}(e.album,t)),o.appendChild(n)}),n.innerHTML="",n.appendChild(o)}(window.zolaSite.webCatalog.getAlbums(),e)}}),e.addEventListener("click",e=>{var t,n;const i=e.target.closest(".play-btn");if(!i)return;const o=i.closest(".track"),s=null==(t=null==o?void 0:o.dataset)?void 0:t.audio;s&&(null==(n=window.zolaSite)?void 0:n.getModule("audio"))&&window.zolaSite.getModule("audio").playAudio(s)})}}),window.addEventListener("scroll",()=>{const e=window.pageYOffset;document.querySelectorAll(".timeline-section").forEach((t,n)=>{const i=-e*(.5+.1*n);t.style.transform=`translateY(${i}px)`})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".logo");e.addEventListener("mouseenter",()=>{e.style.textShadow="0 0 30px var(--primary-color), 0 0 40px var(--primary-color), 0 0 50px var(--primary-color)",e.style.transform="scale(1.05)"}),e.addEventListener("mouseleave",()=>{e.style.textShadow="",e.style.transform=""});document.querySelectorAll(".fact-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.borderColor="var(--accent-color)",e.style.boxShadow="0 0 30px var(--accent-color)"}),e.addEventListener("mouseleave",()=>{e.style.borderColor="",e.style.boxShadow=""})})}),window.addEventListener("error",e=>{"AUDIO"===e.target.tagName&&(r=!1,x())});let M=!1;window.addEventListener("scroll",function(){M||(requestAnimationFrame(()=>{M=!1}),M=!0)}),window.addEventListener("resize",()=>{if(u.length<50)for(let e=0;e<25;e++)b()}),window.addEventListener("load",()=>{var e,t;const n=document.getElementById("gtaLoader"),i=()=>n&&(n.classList.add("hidden"),setTimeout(()=>n.remove(),400));setTimeout(i,1200),document.addEventListener("click",i,{once:!0}),document.body.style.opacity="0",document.body.style.transition="opacity 1s ease",setTimeout(()=>{document.body.style.opacity="1"},100);const o=document.getElementById("gtaPhone"),s=document.getElementById("phoneTime"),a=document.getElementById("sfxPhoneOpen"),r=document.getElementById("sfxPhoneClose");function l(){const e=new Date;s&&(s.textContent=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}document.getElementById("sfxTap"),document.getElementById("sfxSms"),l(),setInterval(l,6e4),window.addEventListener("keydown",e=>{var t,n;if("ArrowUp"===e.key&&(e.preventDefault(),o)){const e=!o.classList.contains("open");o.classList.toggle("open"),o.setAttribute("aria-hidden",e?"false":"true");try{null==(n=null==(t=e?a:r)?void 0:t.play)||n.call(t)}catch{}}}),null==(e=document.getElementById("openPhoneBtn"))||e.addEventListener("click",()=>{var e,t;const n=!(null==o?void 0:o.classList.contains("open"));null==o||o.classList.toggle("open"),null==o||o.setAttribute("aria-hidden",n?"false":"true");try{null==(t=null==(e=n?a:r)?void 0:e.play)||t.call(e)}catch{}}),null==o||o.addEventListener("click",e=>{e.target===o&&(o.classList.remove("open"),o.setAttribute("aria-hidden","true"))});const d=document.getElementById("appGrid");let c=null;null==d||d.addEventListener("pointerdown",()=>{c=setTimeout(()=>d.classList.add("wiggle"),600)}),null==d||d.addEventListener("pointerup",()=>{c&&clearTimeout(c)}),null==d||d.addEventListener("dblclick",()=>d.classList.remove("wiggle"));const u=document.getElementById("gtaPhone"),m=document.getElementById("ifrPhone");null==(t=document.getElementById("openMissionsBtn"))||t.addEventListener("click",()=>{var e;null==u||u.classList.add("open");try{null==(e=null==m?void 0:m.contentWindow)||e.postMessage({type:"openMissions",html:'\n          <div style="padding:12px;color:#fff">\n            <h3 style="margin:0 0 10px">Missions GTA V</h3>\n            <div style="display:grid;gap:10px">\n              <div style="background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:10px">\n                <strong>Prologue</strong><br>\n                Braquage à Ludendorff. Introduction de Michael, Trevor.\n              </div>\n              <div style="background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:10px">\n                <strong>Franklin et Lamar</strong><br>\n                Repossession de voitures. Début de l’arc Franklin.\n              </div>\n              <div style="background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:10px">\n                <strong>Jewel Store Job</strong><br>\n                Premier casse à Los Santos, choix de l’approche.\n              </div>\n            </div>\n          </div>'},"*")}catch{}})}),setInterval(function(){const e=document.createElement("div");e.style.position="fixed",e.style.width="2px",e.style.height="2px",e.style.background="var(--primary-color)",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.zIndex="1",e.style.left=100*Math.random()+"vw",e.style.top=100*Math.random()+"vh",document.body.appendChild(e);let t=1;const n=setInterval(()=>{t-=.02,e.style.opacity=t,t<=0&&(clearInterval(n),e.remove())},50)},2e3),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("h2, h3, .track-title").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.filter="hue-rotate(90deg)",e.style.transform="skew(-2deg)"}),e.addEventListener("mouseleave",()=>{e.style.filter="",e.style.transform=""})})});
