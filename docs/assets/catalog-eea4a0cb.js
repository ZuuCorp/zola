class t{constructor(){this.tracks=[],this.source="itunes"}async init(){try{await this.fetchItunesTracks("Zola"),this.dispatchEvent("catalog:loaded",{total:this.tracks.length})}catch(t){}}async fetchItunesTracks(t){const e=`https://itunes.apple.com/search?term=${encodeURIComponent(t)}&entity=song&limit=50&country=FR`,a=await fetch(e,{mode:"cors"});if(!a.ok)return;const r=await a.json();this.tracks=(r.results||[]).map(t=>{var e;return{id:t.trackId,title:t.trackName,album:t.collectionName,artist:t.artistName,cover:(null==(e=t.artworkUrl100)?void 0:e.replace("100x100bb","600x600bb"))||t.artworkUrl100,previewUrl:t.previewUrl,genre:t.primaryGenreName,releaseDate:t.releaseDate}}).filter(t=>!!t.previewUrl)}getTracks(){return this.tracks}dispatchEvent(t,e={}){const a=new CustomEvent(t,{detail:{...e,timestamp:Date.now()}});window.dispatchEvent(a)}}export{t as W};
